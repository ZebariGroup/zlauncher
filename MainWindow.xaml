<Window x:Class="ZLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ZLauncher"
        mc:Ignorable="d"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStyle="None"
        Topmost="True"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Width="1080"
        Height="720"
        WindowStartupLocation="CenterScreen"
        Title="ZLauncher"
        Loaded="OnWindowLoaded"
        Deactivated="OnWindowDeactivated"
        PreviewKeyDown="OnWindowPreviewKeyDown">
    <Border Background="#FF1E1E1E"
            CornerRadius="16"
            SnapsToDevicePixels="True"
            BorderBrush="#FF303030"
            BorderThickness="1">
    <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320" />
                <ColumnDefinition Width="2" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Search and command bar -->
            <Grid Grid.Row="0" Grid.ColumnSpan="3" Margin="24 24 24 12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Border Grid.Column="0"
                        Width="48"
                        Height="48"
                        Background="#FF2A2A2A"
                        CornerRadius="12">
                    <Viewbox Margin="10">
                        <Path Data="M3,3 L21,3 L21,21 L3,21 z M9,7 L7,9 L11,13 L7,17 L9,19 L13,15 L17,19 L19,17 L15,13 L19,9 L17,7 L13,11 z"
                              Stretch="Uniform"
                              Fill="White"
                              Opacity="0.85" />
                    </Viewbox>
                </Border>
                <TextBox Grid.Column="1"
                         x:Name="SearchBox"
                         Margin="16 0"
                         Height="48"
                         Style="{StaticResource SearchTextBoxStyle}"
                         VerticalContentAlignment="Center"
                         Tag="Search apps, commands, files..."
                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                         KeyDown="OnSearchBoxKeyDown" />
                <ToggleButton Grid.Column="2"
                              Width="48"
                              Height="48"
                              Style="{StaticResource ToggleIconButtonStyle}">
                    <ToggleButton.Content>
                        <Path Data="M3,3 L21,3 L21,21 L3,21 z M7,7 L17,7 L17,17 L7,17 z"
                              Stretch="Uniform"
                              Fill="White"
                              Opacity="0.7" />
                    </ToggleButton.Content>
                </ToggleButton>
            </Grid>

            <!-- Profile and shortcuts column -->
            <StackPanel Grid.Row="1" Grid.Column="0" Grid.RowSpan="2" Margin="24 0 12 24">
                <StackPanel Orientation="Horizontal" Margin="0 0 0 24" VerticalAlignment="Top">
                    <Border Width="64" Height="64" Background="#FF2A2A2A" CornerRadius="16">
                        <TextBlock Text="ZG" FontSize="24" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" />
                    </Border>
                    <StackPanel Margin="16 0 0 0" VerticalAlignment="Center">
                        <TextBlock Text="Zebari User" FontSize="18" FontWeight="SemiBold" Foreground="White" />
                        <TextBlock Text="Customize your workspace" FontSize="12" Foreground="#FFAAAAAA" />
                    </StackPanel>
                </StackPanel>

                <StackPanel>
                    <TextBlock Text="Pinned Actions" FontSize="16" FontWeight="SemiBold" Foreground="White" Margin="0 0 0 12" />
                    <ItemsControl ItemsSource="{Binding PinnedActions}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Style="{StaticResource ActionButtonStyle}" Command="{Binding LaunchCommand}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Icon}" FontSize="20" Margin="0 0 12 0" />
                                        <StackPanel>
                                            <TextBlock Text="{Binding Title}" FontWeight="SemiBold" />
                                            <TextBlock Text="{Binding Description}" FontSize="12" Foreground="#FFAAAAAA" />
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>

                <StackPanel Margin="0 24 0 0">
                    <TextBlock Text="Workflows" FontSize="16" FontWeight="SemiBold" Foreground="White" Margin="0 0 0 12" />
                    <ItemsControl ItemsSource="{Binding MacroGroups}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Expander Style="{StaticResource ExpanderStyle}" Header="{Binding Name}">
                                    <ItemsControl ItemsSource="{Binding Actions}" Margin="0 8 0 0">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Button Style="{StaticResource WorkflowButtonStyle}" Command="{Binding LaunchCommand}">
                                                    <StackPanel>
                                                        <TextBlock Text="{Binding Title}" />
                                                        <TextBlock Text="{Binding Description}" FontSize="12" Foreground="#FFAAAAAA" />
                                                    </StackPanel>
                                                </Button>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </Expander>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </StackPanel>

            <!-- Divider -->
            <Border Grid.Row="1" Grid.Column="1" Grid.RowSpan="2" Background="#FF2A2A2A" Margin="0 24" />

            <!-- Main content area -->
            <Grid Grid.Row="1" Grid.Column="2" Grid.RowSpan="2" Margin="12 0 24 24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0 0 0 24">
                    <TextBlock Text="{Binding SearchResultsHeader}" FontSize="16" FontWeight="SemiBold" Foreground="White" Margin="0 0 0 12" />
                    <ItemsControl ItemsSource="{Binding SearchResults}">
                        <ItemsControl.Style>
                            <Style TargetType="ItemsControl">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HasSearchText}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ItemsControl.Style>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Style="{StaticResource RecentButtonStyle}" Command="{Binding LaunchCommand}" Click="OnLauncherButtonClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Icon}" FontSize="18" Margin="0 12 0 0" Width="24" TextAlignment="Center" />
                                        <StackPanel>
                                            <TextBlock Text="{Binding Title}" FontWeight="SemiBold" />
                                            <TextBlock Text="{Binding Subtitle}" FontSize="12" Foreground="#FFAAAAAA" />
                                            <TextBlock Text="{Binding Category}" FontSize="11" Foreground="#FF6A9CDC" />
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <ItemsControl ItemsSource="{Binding RecentItems}">
                        <ItemsControl.Style>
                            <Style TargetType="ItemsControl">
                                <Setter Property="Visibility" Value="Visible" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HasSearchText}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ItemsControl.Style>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Style="{StaticResource RecentButtonStyle}" Command="{Binding LaunchCommand}" Click="OnLauncherButtonClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Icon}" FontSize="18" Margin="0 12 0 0" />
                                        <StackPanel>
                                            <TextBlock Text="{Binding Title}" FontWeight="SemiBold" />
                                            <TextBlock Text="{Binding Subtitle}" FontSize="12" Foreground="#FFAAAAAA" />
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>

                <StackPanel Grid.Row="1" Margin="0 0 0 24">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                        <TextBlock Text="All Apps" FontSize="16" FontWeight="SemiBold" Foreground="White" />
                        <ComboBox ItemsSource="{Binding AppFilters}" SelectedItem="{Binding SelectedAppFilter}" Margin="24 0 0 0" Width="160" />
                    </StackPanel>
                    <ListView x:Name="AppListView"
                              ItemsSource="{Binding FilteredApplications}"
                              Style="{StaticResource AppListStyle}"
                              Margin="0 12 0 0"
                              Height="220"
                              MouseDoubleClick="OnApplicationItemDoubleClick">
                        <ListView.View>
                            <GridView AllowsColumnReorder="False">
                                <GridViewColumn Header="App" DisplayMemberBinding="{Binding Title}" Width="240" />
                                <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Category}" Width="120" />
                                <GridViewColumn Header="Source" DisplayMemberBinding="{Binding Source}" Width="120" />
                            </GridView>
                        </ListView.View>
                    </ListView>
                </StackPanel>

                <StackPanel Grid.Row="2">
                    <TextBlock Text="Tiles" FontSize="16" FontWeight="SemiBold" Foreground="White" Margin="0 0 0 12" />
                    <ItemsControl ItemsSource="{Binding TileGroups}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0 0 0 16">
                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" Foreground="#FFAAAAAA" Margin="0 0 0 8" />
                                    <UniformGrid Columns="4" Rows="2" Margin="0 0 0 8" HorizontalAlignment="Left">
                                        <ItemsControl ItemsSource="{Binding Tiles}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Columns="4" Rows="2" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Button Style="{StaticResource TileButtonStyle}" Command="{Binding LaunchCommand}" Click="OnLauncherButtonClick">
                                                        <StackPanel>
                                                            <Border Width="64" Height="64" Background="#FF2A2A2A" CornerRadius="12" HorizontalAlignment="Center">
                                                                <ContentControl Content="{Binding Icon}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                            </Border>
                                                            <TextBlock Text="{Binding Title}" HorizontalAlignment="Center" Margin="0 8 0 0" />
                                                        </StackPanel>
                                                    </Button>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </UniformGrid>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Grid>
    </Grid>
    </Border>
</Window>
